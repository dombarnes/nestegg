<section>

  <h1><%= @account.name.capitalize %> Transactions</h1>
  <%= link_to 'Edit', edit_account_path(@account) %> <%= link_to 'Back to accounts', accounts_path %>
  <h2>Balance <%= @account.balance %></h2>
  <p><%= link_to 'New Transaction', new_account_transaction_path %></p>

  <p id="notice"><%= notice %></p>
  
  <section>
    <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Description</th>
        <th>Amount</th>
        <th>Category</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% if @transactions.blank? %>
        <tr>
          <td colspan="7">There are no transactions to show.</td>
      <% else %>
        <% @transactions.each do |transaction| %>
          <tr>
            <td><%= transaction.date %></td>
            <td><%= transaction.description %></td>
            <td><%= transaction.amount %></td>
            <td><%= transaction.category_id %></td>
            <td><%= link_to 'Show', [@account, transaction] %></td>
            <td><%= link_to 'Edit', edit_account_transaction_path(@account, transaction) %></td>
            <td><%= link_to 'Delete', [@account, transaction], method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
  </section>

<section>
  <h2>Import from CSV</h2>
  <p>Import transactions from your bank's download facilities.</p>
  <%= form_tag import_account_transactions_path, multipart: true do %> 
    <%= check_box_tag headers %><%= label_tag "This file has header rows" %>
    <%= file_field_tag :file %>
    <%= submit_tag "Import" %>
  <% end %>
</section>
</section>

<section id="debug">
</section>
